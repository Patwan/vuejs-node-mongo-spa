(function(t){function e(e){for(var o,r,i=e[0],l=e[1],c=e[2],d=0,p=[];d<i.length;d++)r=i[d],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&p.push(n[r][0]),n[r]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);u&&u(e);while(p.length)p.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],o=!0,i=1;i<a.length;i++){var l=a[i];0!==n[l]&&(o=!1)}o&&(s.splice(e--,1),t=r(r.s=a[0]))}return t}var o={},n={app:0},s=[];function r(e){if(o[e])return o[e].exports;var a=o[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=o,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(a,o,function(e){return t[e]}.bind(null,o));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=l;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"119c":function(t,e,a){"use strict";var o=a("a4ed"),n=a.n(o);n.a},"56d7":function(t,e,a){"use strict";a.r(e);var o=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("Navbar",{on:{newPost:t.newPost}}),a("v-content",[a("Dashboard",{attrs:{posts:t.posts},on:{updatePost:t.updatePost,removePost:t.removePost}})],1)],1)},s=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-toolbar",{attrs:{dark:""}},[a("v-toolbar-title",{staticClass:"text-uppercase yellow--text"},[t._v("\n        Vue-"),a("span",{staticClass:"font-weight-light"},[t._v("Node-Mongo-")]),t._v(" Blog\n    ")]),a("div",{staticClass:"flex-grow-1"}),a("v-toolbar-items",[a("v-btn",{attrs:{text:""},on:{click:function(e){t.newPostDialog=!t.newPostDialog}}},[t._v("New Post")])],1)],1),a("v-dialog",{attrs:{persistent:"","max-width":"768"},model:{value:t.newPostDialog,callback:function(e){t.newPostDialog=e},expression:"newPostDialog"}},[a("v-card",[a("v-card-title",{staticClass:"grey darken-4 white--text headline"},[t._v("\n              New Post\n          ")]),a("v-card-text",[a("v-container",{attrs:{fluid:"","grid-list-xl":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-text-field",{attrs:{label:"Title"},model:{value:t.newPost.title,callback:function(e){t.$set(t.newPost,"title",e)},expression:"newPost.title"}})],1),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-text-field",{attrs:{label:"Author"},model:{value:t.newPost.author,callback:function(e){t.$set(t.newPost,"author",e)},expression:"newPost.author"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{attrs:{label:"Content"},model:{value:t.newPost.content,callback:function(e){t.$set(t.newPost,"content",e)},expression:"newPost.content"}})],1)],1)],1)],1),a("v-card-actions",{staticClass:"grey darken-4"},[a("v-btn",{attrs:{text:"",color:"grey"},on:{click:function(e){t.newPostDialog=!t.newPostDialog}}},[t._v(" Close ")]),a("v-spacer"),a("v-btn",{attrs:{text:"",color:"yellow"},on:{click:t.addPost}},[t._v(" Add Post ")])],1)],1)],1)],1)},i=[],l={name:"Navbar",data(){return{drawer:!1,newPostDialog:!1,newPost:{}}},methods:{addPost(){let t={title:this.newPost.title,author:this.newPost.author,content:this.newPost.content};fetch("http://localhost:5000/api/post/new",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t)}).then(t=>{return t.json()}).then(t=>{this.$emit("newPost",t.result),this.newPostDialog=!1,this.newPost={}})}}},c=l,u=a("2877"),d=a("6544"),p=a.n(d),v=a("8336"),f=a("b0af"),h=a("99d9"),m=a("a523"),P=a("169a"),b=a("0e8f"),g=a("a722"),x=a("2fa4"),w=a("8654"),y=a("a844"),_=a("71d9"),V=a("2a7f"),C=Object(u["a"])(c,r,i,!1,null,null,null),k=C.exports;p()(C,{VBtn:v["a"],VCard:f["a"],VCardActions:h["a"],VCardText:h["b"],VCardTitle:h["c"],VContainer:m["a"],VDialog:P["a"],VFlex:b["a"],VLayout:g["a"],VSpacer:x["a"],VTextField:w["a"],VTextarea:y["a"],VToolbar:_["a"],VToolbarItems:V["a"],VToolbarTitle:V["b"]});var D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"pa-3",attrs:{fluid:""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",md8:"","offset-md2":""}},[a("h1",{staticClass:"heading"},[t._v("Posts")]),a("p",[t._v(" \n                This application illustrates creation of a CRUD based Single Page Application (SPA) blog\n                using MEVN stack. "),a("br"),t._v("\n                I use "),a("b",[t._v(" Vuejs and Vuetify")]),t._v(" for the frontend and on the backend\n                "),a("b",[t._v(" Nodejs and MongoDB")])]),t._l(t.posts.slice((t.page-1)*t.displayAmount,t.displayAmount*t.page),(function(e,o){return a("v-col",{key:e._id},[a("v-card",{attrs:{color:"#385F73",dark:""}},[a("v-card-text",{staticClass:"white--text"},[a("div",{staticClass:"headline mb-2"},[t._v(t._s(e.title)+" "),a("span",{staticClass:"mySpan"},[t._v(" Author: "+t._s(e.author)+" ")])]),t._v("\n          "+t._s(e.content)+"\n        ")]),a("v-card-actions",[a("v-btn",{attrs:{color:"success"},on:{click:function(a){return t.updatePostDialog(e)}}},[t._v(" Update")]),a("div",{staticClass:"flex-grow-1"}),a("v-btn",{attrs:{color:"error"},on:{click:function(e){return t.$emit("removePost",o)}}},[t._v(" Remove ")])],1)],1)],1)}))],2),a("v-flex",{attrs:{xs12:"",md8:"","offset-md2":""}},[a("v-pagination",{attrs:{length:Math.ceil(t.posts.length/t.displayAmount)},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1)],1),a("v-dialog",{attrs:{persistent:"","max-width":"768"},model:{value:t.updateDialog,callback:function(e){t.updateDialog=e},expression:"updateDialog"}},[a("v-card",[a("v-card-title",{staticClass:"grey darken-4 white--text headline"},[t._v("\n            Update\n        ")]),a("v-card-text",[a("v-container",{attrs:{fluid:"","grid-list-xl":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",md6:""}},[t.currentPost?a("v-text-field",{attrs:{label:"Title"},model:{value:t.currentPost.title,callback:function(e){t.$set(t.currentPost,"title",e)},expression:"currentPost.title"}}):t._e()],1),a("v-flex",{attrs:{xs12:"",md6:""}},[t.currentPost?a("v-text-field",{attrs:{label:"Author"},model:{value:t.currentPost.author,callback:function(e){t.$set(t.currentPost,"author",e)},expression:"currentPost.author"}}):t._e()],1),a("v-flex",{attrs:{xs12:""}},[t.currentPost?a("v-textarea",{attrs:{label:"Content"},model:{value:t.currentPost.content,callback:function(e){t.$set(t.currentPost,"content",e)},expression:"currentPost.content"}}):t._e()],1)],1)],1)],1),a("v-card-actions",{staticClass:"grey darken-4"},[a("v-btn",{attrs:{text:"",color:"grey"},on:{click:function(e){t.updateDialog=!t.updateDialog}}},[t._v(" Close ")]),a("v-spacer"),a("v-btn",{attrs:{text:"",color:"yellow"},on:{click:t.updatePost}},[t._v(" Update Post ")])],1)],1)],1)],1)},j=[],T={name:"Dashboard",props:["posts"],data(){return{updateDialog:!1,currentPost:void 0,page:1,displayAmount:5}},methods:{updatePostDialog(t){this.currentPost=t,this.updateDialog=!0},updatePost(){this.$emit("updatePost",this.currentPost),this.updateDialog=!1}}},O=T,S=(a("119c"),a("62ad")),A=a("891e"),$=Object(u["a"])(O,D,j,!1,null,"290254b4",null),N=$.exports;p()($,{VBtn:v["a"],VCard:f["a"],VCardActions:h["a"],VCardText:h["b"],VCardTitle:h["c"],VCol:S["a"],VContainer:m["a"],VDialog:P["a"],VFlex:b["a"],VLayout:g["a"],VPagination:A["a"],VSpacer:x["a"],VTextField:w["a"],VTextarea:y["a"]});var M={name:"App",components:{Navbar:k,Dashboard:N},data:()=>{return{posts:[]}},methods:{getPosts:async function(){this.posts=await fetch("api/posts/all").then(t=>{return t.json()}).then(t=>{return t.result}),this.posts.sort((function(t,e){return t.timestamp<e.timestamp?1:t.timestamp>e.timestamp?-1:0}))},newPost:function(t){this.posts.push(t),this.posts.sort((function(t,e){return t.timestamp<e.timestamp?1:t.timestamp>e.timestamp?-1:0}))},updatePost:function(t){let e={_id:t._id,title:t.title,author:t.author,content:t.content,timestamp:t.timestamp};fetch("api/post/update",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then(t=>{return t.json()}).then(t=>{console.log(t)})},removePost:function(t){fetch("api/post/remove",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({_id:this.posts[t]._id})}).then(t=>{return t.json()}).then(t=>{console.log(t)}),this.posts.splice(t,1)}},beforeMount(){this.getPosts()}},F=M,J=a("7496"),B=a("a75b"),E=Object(u["a"])(F,n,s,!1,null,null,null),U=E.exports;p()(E,{VApp:J["a"],VContent:B["a"]});var I=a("f309");o["a"].use(I["a"]);var L=new I["a"]({icons:{iconfont:"mdi"}});o["a"].config.productionTip=!1,new o["a"]({vuetify:L,render:t=>t(U)}).$mount("#app")},a4ed:function(t,e,a){}});
//# sourceMappingURL=app.baccac41.js.map